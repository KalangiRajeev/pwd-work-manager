<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button icon="chevron-back" defaultHref="/main/agreement-register"></ion-back-button>
    </ion-buttons>
    <ion-title>Enter Agreement Details</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Enter Agreement Details</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="form-agt-register">
    <form [formGroup]="agreementRegisterForm" (ngSubmit)="saveAgreementRegister()">
      <ion-textarea formControlName="nameOfWork" class="input-fields" label="Name of Work" label-placement="floating"
        fill="outline" placeholder="Enter text" autoGrow="true"></ion-textarea>
      <ion-input formControlName="agreementNumber" formclass="input-fields" label="Agreement Number"
        label-placement="floating" fill="outline" placeholder="Enter text"></ion-input>

      <mat-form-field class="date">
        <mat-label>Date of Agreement</mat-label>
        <input matInput [matDatepicker]="picker" [formControl]="dateOfAgreement">
        <mat-hint>DD/MM/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>


      <ion-input formControlName="estimateContractValue" class="input-fields" label="Estimate Contract Value"
        type="number" label-placement="floating" fill="outline" placeholder="Enter text"></ion-input>
      <ion-input formControlName="tenderPercentage" class="input-fields" label="Tender %" type="number"
        label-placement="floating" fill="outline" placeholder="Enter text"></ion-input>
      <ion-segment formControlName="tenderQuote" value="Less">
        <ion-segment-button value="Less">
          <ion-label>Less</ion-label>
        </ion-segment-button>
        <ion-segment-button value="Equals">
          <ion-label>Equals</ion-label>
        </ion-segment-button>
        <ion-segment-button value="Excess">
          <ion-label>Excess</ion-label>
        </ion-segment-button>
      </ion-segment>


      <mat-form-field>
        <mat-label>Date of Completion</mat-label>
        <input matInput [matDatepicker]="picker1" [formControl]="dueDateOfCompletion">
        <mat-hint>DD/MM/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>

      <mat-form-field>
        <mat-label>EOT Date</mat-label>
        <input matInput [matDatepicker]="picker2" [formControl]="eotDate">
        <mat-hint>DD/MM/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>Agency</mat-label>
        <input matInput type="text" placeholder="Pick one" aria-label="agency" [formControl]="agencyFC"
          [matAutocomplete]="autoAgency">
        <mat-autocomplete #autoAgency="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let option of agencies$ | async" [value]="option">{{option.name}}</mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>Agt. concluded at Office</mat-label>
        <input matInput type="text" placeholder="Pick one" aria-label="office" [formControl]="officeFC"
          [matAutocomplete]="autoOffice">
        <mat-autocomplete #autoOffice="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let option of focalOffices$ | async" [value]="option">{{option.name}}</mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>Associated to Office</mat-label>
        <input matInput type="text" placeholder="Pick one" aria-label="associatedOffice"
          [formControl]="associatedOfficeFC" [matAutocomplete]="autoAssoOffice">
        <mat-autocomplete #autoAssoOffice="matAutocomplete" [displayWith]="displayFn">
          <mat-option *ngFor="let option of nonFocalOffices$ | async" [value]="option">{{option.name}}</mat-option>
        </mat-autocomplete>
      </mat-form-field>


      <mat-form-field>
        <mat-label>Status of Work</mat-label>
        <mat-select formControlName="workStatus">
          <mat-option *ngFor="let o of workStatuses" [value]="o">{{ o }}</mat-option>
        </mat-select>
      </mat-form-field>


      <ion-textarea formControlName="technicalSanctionReference" class="input-fields"
        label="Technical Sanction/Approval Reference" label-placement="floating" fill="outline" placeholder="Enter text"
        autoGrow="true"></ion-textarea>


      <ion-textarea formControlName="administrativeSanctionReference" class="input-fields"
        label="Administrative Sanction Reference" label-placement="floating" fill="outline" placeholder="Enter text"
        autoGrow="true"></ion-textarea>

      <ion-textarea formControlName="remarks" class="input-fields" label="Remarks" label-placement="floating"
        fill="outline" placeholder="Enter text" autoGrow="true"></ion-textarea>

    </form>

    <div class="ion-buttons">
      <ion-buttons slot="secondary">
        <ion-button fill="outline"
          [routerLink]="agtRegId ? '/main/agreement-register/details/'+ agtRegId: '/main/agreement-register'"
          routerDirection="back"> Cancel </ion-button>
      </ion-buttons>
      <ion-buttons slot="primary">
        <ion-button fill="solid" type="submit" (click)="saveAgreementRegister()"> Save Details </ion-button>
      </ion-buttons>
    </div>
  </div>

</ion-content>